# 强制类型转换
Lua 语言在运行时提供了数值与字符串之间的自动转换（conversion）。针对字符串的所有算术操作会尝试将字符串转换为数值。Lua 语言不仅仅在算术操作时进行这种强制类型转换（coercion），还会在任何需要数值的情况下进行，例如函数 `math.sin` 的参数。

相反，当 Lua 语言发现在需要字符串的地方出现了数值时，它就会把数值转换为字符串：
```lua
print(10 .. 20)         --> 1020
```

当在数值后紧接着使用字符串连接时，必须使用空格将它们分开，否则 Lua 语言会把第一个点当成小数点。

作为这种“二类状态（second-class status）”的表现之一，Lua 5.3 没有实现强制类型转换与整型的集成，而是采用了另一种更简单和快速的实现方式：算术运算的规则是只有在两个操作数都是整型值时结果才是整型。因此，由于字符串不是整型值，所以任何有字符串参与的算术运算都会被当作浮点运算处理：
```lua
> "10" + 1      --> 11.0
```

如果需要显式地将一个字符串转换成数值，那么可以使用函数 `tonumber`。当这个字符串的内容不能表示为有效数字时该函数返回 nil；否则，该函数就按照 Lua 语法扫描器的规则返回对应的整型值或浮点类型值：
```lua
> tonumber("   -3 ")        --> -3
> tonumber("  10e4 ")       --> 10000.0
> tonumber("10e")           --> nil (not a valid number)
> tonumber("0x1.3p-4")      --> 0.07421875
```

默认情况下，函数 `tonumber` 使用的是十进制，但是也可以指明使用二进制到三十六进制之间的任意进制：
```lua
> tonumber("100101", 2)     --> 37
> tonumber("fff", 16)       --> 4095
> tonumber("-ZZ", 36)       --> -1295
> tonumber("987", 8)        --> nil
```

调用函数 `tostring` 可以将数值转换成字符串：
```lua
print(tostring(10) == "10") --> true
```